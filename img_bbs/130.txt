# 学習ノート

## 情報源をメモしてください。
制作をすすめるに当たって、さまざまなエラーメッセージなどに出くわすと思います。
Googleの検索や教科書などの情報で解決できることも多いと思うのですが、ついつい記録をとらずに次の作業に進んでしまいがちです。

起こった問題と解決の参考になった情報源(書籍のタイトルと記載ページや、WebサイトURLなど)を記録しておくと、今後、同じエラーメッセージを見かけた時に、役立てられるようになります。将来ブログを書きたくなった時のネタ帳にもなるかもしれません。
このテキストファイルに、問題と解決作の情報源のメモをとるようにしてください。

## 序盤の手順
本課題は操作のひとつひとつを説明するタイプの教材ではなく、どう作るかを各自で考えていただくタイプの教材になっています。

どこから手をつけて良いかわからないという方向けに、最初に、いくつかのおおまかな手順を紹介します。
具体的な操作方法については教科書を読み返してみてください。
専門用語などが登場してGoogleを検索した場合は、上記の記述の通り、情報源をメモしておいてください。


### STEP.0 開発環境を作る
最初の手順としてXAMPPやMAMPPをインストールして、開発環境を作りましょう。
(この課題を始める前に、教科書などですでにPHPが動作する状態となっている方も多いと思います。)

#### 参考にした情報源
検索した言葉: 
解決にいたった情報源: http://___

起こった問題: 
解決にいたった情報源: 書籍「___」(P.123)

表示されたエラーメッセージ:
解決にいたった情報源: http://___
.
.
.
(上記のような形で、情報源があった場合はメモる習慣をつけると、後で役立ちます)


### STEP.1 ドキュメントルートにimg_bbsフォルダをコピーして、XAMPPを起動する。
「ドキュメントルート」という言葉について不明な場合は、検索してみてください。
ただしく操作を終えると、ブラウザで下記のURLを開くと仕様書のスクリーンショットと同様の画面が表示されます。
http://localhost/img_bbs/index.html

エラーが出る場合は、エラーメッセージを検索するなどしてください。
検索した結果、解決にいたった場合は情報源のメモを残しておきましょう。

#### 参考にした情報源
検索した言葉: ドキュメントルート
解決にいたった情報源: http://___

表示されたエラーメッセージ:
解決にいたった情報源: http://___
(以下、同様です。)


### STEP.2 データベース「img_bbs」を作成する。
「create database」文を使うか、phpMyAdminを操作するなど、何かしらの方法で、データベース「img_bbs」を作成してください。
日本語をあつかうため、照合順序はutf8_general_ciにしてください。

#### 参考にした情報源
.最初から教えての81ページ
.
.


### STEP.3 テーブル「post」を作成する。
「create table」文を使って、仕様書の「テーブル定義書」で定義した内容のテーブルを作成してください。
定義書の「NOT NULL」属性や「PRIMARY KEY」についての記述を見逃さないようにしましょう。

#### 参考にした情報源
.「Not Null = Yes」の意味は、必須項目という意味。空欄はNullにチェックを入れる。（最初から教えて86ページ）
.一つのテーブルにPRIMARYキーは一つ
.PRIMARYキーは文字列型でも数値型でも問題ない
.ユニークキーは複数まとめて指定することもできる


### STEP.4 ダミーデータをinsertしておく
「insert」文を使って、2件ほどデータを挿入してみましょう。
INSERT INTO `img_bbs`.`post` (`id`, `title`, `text`, `regist_date`) VALUES (1, 'テスト投稿', '投稿の実験です。\n改行してみます。', '2017-01-01');
INSERT INTO `img_bbs`.`post` (`id`, `title`, `text`, `regist_date`) VALUES (2, 'テスト投稿2', '投稿の実験２です。\n改行してみます。', '2017-01-02');

#### 参考にした情報源
.最初から教えて96ページ。
.
.


### STEP.5 index.htmlをindex.phpに変更しましょう
ただしく操作すると、下記のURLでアクセスできるようになります。
http://localhost/img_bbs/index.php

#### 参考にした情報源
.
.
.

### STEP.6 index.phpに加筆修正を加えて、あらかじめinsertしておいたダミーのデータ2件を表示させてみましょう。
ここからが本題です。index.phpには、投稿機能も作成する必要がありますが、いったん入力フォームについては無視しておいて、STEP.4で挿入したダミーの2件のデータを表示できるようにしてみましょう。

#### 参考にした情報源
.Parse error: syntax errorエラーが出た。https://php1st.com/1263/ ''や""のとじかたが間違っている
.最初から136、227、230ページ
.


### STEP.7 index.phpに加筆修正を加えて、新規に登録できるようにしましょう。
ただし、入力エラーのチェックと画像のアップロードは後回しでかまいません。
3件目のデータが表示されるようがんばりましょう。

#### 参考にした情報源
.INSER INTO の説明　https://www.dbonline.jp/mysql/insert/index1.html
.$array  =   array($_POST['title'],$_POST['text'],$regist);
　arrayの中身は$_POST[]以外に変数も入れることができる。
.

この先は、各自で書き足して進めていってください。


### STEP.8 
#### 参考にした情報源
画像のファイル名をidにする場合、テキストを投稿してidを発行してからファイル名をidに変え流ひつ
トランザクション
https://teratail.com/questions/62381
PDOは自動コミットモードで動作する
http://php.net/manual/ja/pdo.begintransaction.php.
.
.


### STEP.9
#### 参考にした情報源
.エラーチェックは配列で実装する
https://teratail.com/questions/102012
.画像ファイルが一致しない場合のバリデーション
http://php.o0o0.jp/article/php-validate_image
文字列の長さを得る方法
https://www.javadrive.jp/phpfunc/string/index1.html
ファイル名を正規表現でチェック
https://techacademy.jp/magazine/11402
POSTメソッドによるアップロード
http://php.net/manual/ja/features.file-upload.post-method.php
dirname(__FILE__)."/{$post_id}.jpeg";の意味がわかる
https://webkaru.net/php/dirname/
定数を作れるdefine
http://php.net/manual/ja/function.define.php
ファイルの拡張子でバリデーションする場合に正規表現が使えない場合、in_arrayを使うと便利
https://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q14104360089
